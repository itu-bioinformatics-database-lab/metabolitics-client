<div class="container">
  <div *ngIf="!data">
    <mat-spinner diameter="50" style="margin:30px auto 10px auto;"></mat-spinner>
    <div style="text-align: center;">Analysis is loading...</div>
  </div>
  <div class="col-md-12" *ngIf="data">
    <div class="col-md-6">
        <mat-form-field style="width: 100%;">
            <label style="float: left;">Cases of the study</label>
            <mat-select style="float: left !important; width: 100%;" [(ngModel)]="selectedObj" (selectionChange)="reloadAnalysis()">
              <mat-option *ngFor="let analysis of data.analyses | orderBy:'name'" [value]="analysis.id">
                  {{analysis.name}} <span style="text-transform: capitalize;">({{analysis.label}})</span> 
                  <!-- <a [routerLink]="['/past-analysis', analysis.id]"><div style="width: 100%;">  {{analysis.name}}</div></a> </mat-option> -->
                  <!-- <a [routerLink]="['/past-analysis', analysis.id]">{{analysis.name}}</a>--></mat-option> 
            </mat-select>
        </mat-form-field>
        </div>
    <div class="col-md-6" style="padding-top: 20px;float: left; position: relative; z-index: 2; height: 50px;">
      <!-- <mat-form-field style="margin-left: 60px;"> -->
    
      <mat-accordion style="text-align:left;">
        <mat-expansion-panel  class="spacee">
          <mat-expansion-panel-header>
            <mat-panel-title>
              Metabolomics Measurements
            </mat-panel-title>
          </mat-expansion-panel-header>
              <!--<concentration-table [conTable]="conTable"></concentration-table>-->
          <div class="row" style="padding: 10px;">
            <form  >
              <div class="table-responsive">
                <table class="table">
                  <thead>
                  <tr>
                    <th style="width: 50%;">Metabolite Name</th>
                    <th style="width: 50%;">Fold Change Value</th>
    
                  </tr>
                  </thead>
    
                  <tbody>
    
                  <tr *ngFor="let r of conTable;let i=index">
                    <td style="width: 50%;">{{ r[0] }}</td>
                    <td style="width: 50%;">{{ r[1] }}</td>
    
                  </tr>
                  </tbody>
                </table>
              </div>
            </form>
          </div>
        </mat-expansion-panel>  </mat-accordion>
      <!-- </mat-form-field> -->
    </div>
    </div>
    <hr>
    <h1 *ngIf="data">
        {{data?.study_name}} - {{ data?.case_name }} - ({{data?.method}}) - {{data?.disease}} <!--({{data?.status ?  'done' : 'running' }})-->
    </h1>
    <div *ngIf="data && !data?.results_pathway">
      <mat-spinner diameter="50" style="margin:30px auto 10px auto;"></mat-spinner>
      <div style="text-align: center;">Analysis in progress...</div>
    </div>
    <div *ngIf="data?.results_pathway">
      <div>
        <pathway-histogram [pathwayScores]="data.results_pathway" [method]="data?.method"></pathway-histogram>
      </div>
      <div>
        <similar-diseases [id]="id"></similar-diseases>
      </div>
      <div>
        <disease-prediction [id]="id" [method]="data?.method"></disease-prediction>
      </div>
      <div>
        <result-table [data]="[data]" [method]="data?.method"></result-table>
      </div>
    </div>    
</div>